import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as f,V as p,d as D}from"./VCard-BeaIFLN5.js";import{V as T}from"./VDataTable-CY7VGB_y.js";import{a as y,V as o}from"./VRow-zu13_Jyq.js";import{d as s}from"./VTextField-zGpYlx5m.js";import{a as k,b as B,c as N,V as U}from"./VSnackbar-uQFr5XBQ.js";import{e as C}from"./VChip-C7nZB9fv.js";import{V as H}from"./VDialog-ROF2-oxb.js";import{v as L,o as c,e as g,w as a,b as t,a as V,t as m,l as $,c as A,a3 as d,a0 as I,V as v,H as n}from"./main-DeyJ3Yy4.js";import{V as E}from"./VForm-0XUPjltB.js";import{V as z}from"./VContainer-CWVNEUP6.js";import{V as S}from"./VSpacer-B6Jhnuqe.js";import{V as R}from"./VSwitch-C9CNNHOd.js";import"./VAvatar-EUupNyHB.js";import"./VImg-CBQKPB9Q.js";import"./forwardRefs-C-GTDzx5.js";import"./VOverlay-C17Imch_.js";import"./easing-DY7PVvcf.js";import"./lazy-2m7JQlYx.js";import"./VCheckboxBtn-Bcwa9W5g.js";import"./VTable-DkHM5ktc.js";import"./VDivider-YiL7etEf.js";import"./index-B8yE8-tp.js";import"./ssrBoot-B68Wim3J.js";function q(){return"Clientes"}const F={data:e=>({dessertName:"",valid:!0,title:q(),route:"customers",dialog:!1,snackbar:!1,visible:!0,text:"Registro Insertado",color:"success",timeout:4e3,search:"",vista:!1,headers:[{title:"Acciones",key:"actions",value:"actions",sortable:!1,width:"150px"},{title:"Direccion",filterable:!0,key:"address"},{title:"Localidad",filterable:!0,key:"locality"},{title:"Telefono",filterable:!0,key:"telephone"},{title:"Nombre",filterable:!0,key:"firstname"},{title:"Estado",key:"active",width:"150px"}],desserts:[],editedIndex:-1,editedItem:{id:"",address:"",locality_id:"",telephone:"",email:"",firstname:"",active:1},defaultItem:{id:"",address:"",locality_id:"",telephone:"",email:"",firstname:"",active:1},filters:{id:"",address:"",locality_id:"",telephone:"",email:"",firstname:"",created_at:"",updated_at:""},filterKey:[],selectedHeaders:[],localities:[]}),computed:{formTitle(){return this.editedIndex===-1?"Registrar "+this.title:"Editar "+this.title},filteredData(){return this.$filteredData().data!==void 0?this.$filteredData().data:this.$filteredData()},showHeaders(){return this.headers.filter(e=>this.selectedHeaders.includes(e))},filteredDesserts(){let e=[];return this.dessertName&&e.push(this.filterDessertName),e.length>0?this.desserts.filter(i=>e.every(h=>h(i))):this.desserts}},watch:{dialog(e){e||this.$close()}},created(){this.$initialize(),this.selectedHeaders=this.headers,this.loadLocalities()},methods:{async loadLocalities(){try{const e=await this.$axios.get(this.$routes.localities);this.localities=e.data.data}catch(e){console.error("Error al cargar localidades:",e)}},filterDessertName(e){return e.name.toLowerCase().includes(this.dessertName.toLowerCase())},filterByName(e){return this.$filterBy(e,"firstname")},filterByActive(e){return this.$filterBy(e,"active")}},mounted(){console.log("Componente "+this.title+" creado")}},M={key:1,class:"grey--text caption"},j={class:"d-flex flex-wrap gap-1 align-center",style:{"min-width":"120px"}},G=["innerHTML"];function K(e,i,h,P,J,u){const b=L("IconBtn");return c(),g(f,{title:"AdministraciÃ³n de "+e.title},{default:a(()=>[t(p,{class:"d-flex px-2"},{default:a(()=>[t(T,{headers:u.showHeaders,items:u.filteredDesserts,search:e.search,class:"text-no-wrap striped-table"},{top:a(()=>[t(f,{flat:"",color:"white"},{default:a(()=>[t(p,null,{default:a(()=>[t(y,null,{default:a(()=>[t(o,{sm:"4",class:"pl-0 pt-20 py-2"},{default:a(()=>[t(s,{modelValue:e.search,"onUpdate:modelValue":i[0]||(i[0]=l=>e.search=l),"append-icon":"ri-search-line",label:"Busqueda de "+e.title},null,8,["modelValue","label"])]),_:1}),t(o,{sm:"3"}),t(o,{sm:"4",class:"pt-20 py-2"},{default:a(()=>[t(k,{modelValue:e.selectedHeaders,"onUpdate:modelValue":i[1]||(i[1]=l=>e.selectedHeaders=l),items:e.headers,label:"Columnas Visibles",multiple:"","return-object":""},{selection:a(({item:l,index:r})=>[r<2?(c(),g(C,{key:0},{default:a(()=>[V("span",null,m(l.title),1)]),_:2},1024)):$("",!0),r===2?(c(),A("span",M,"(otras "+m(e.selectedHeaders.length-2)+"+)",1)):$("",!0)]),_:1},8,["modelValue","items"])]),_:1}),t(o,{sm:"1",class:"pt-20 py-2"},{default:a(()=>[t(H,{modelValue:e.dialog,"onUpdate:modelValue":i[11]||(i[11]=l=>e.dialog=l),"max-width":"600px"},{activator:a(({props:l})=>[t(d,I(l,{color:e.$cv("principal"),size:"x-large",title:"Registrar "+e.title}),{default:a(()=>[t(v,{size:"large",icon:"ri-add-circle-line"})]),_:2},1040,["color","title"])]),default:a(()=>[t(f,null,{default:a(()=>[t(B,{color:e.$cv("principal")},{default:a(()=>[t(d,{icon:"ri-close-line",color:"white",onClick:i[2]||(i[2]=l=>e.dialog=!1)}),t(N,null,{default:a(()=>[n(m(u.formTitle),1)]),_:1})]),_:1},8,["color"]),t(E,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":i[8]||(i[8]=l=>e.valid=l),"lazy-validation":""},{default:a(()=>[t(p,null,{default:a(()=>[t(z,null,{default:a(()=>[t(y,null,{default:a(()=>[t(o,{cols:"12",sm:"6"},{default:a(()=>[t(s,{modelValue:e.editedItem.address,"onUpdate:modelValue":i[3]||(i[3]=l=>e.editedItem.address=l),label:"Direccion",required:""},null,8,["modelValue"])]),_:1}),t(o,{cols:"12",sm:"6"},{default:a(()=>[t(s,{modelValue:e.editedItem.telephone,"onUpdate:modelValue":i[4]||(i[4]=l=>e.editedItem.telephone=l),label:"Telefono",required:""},null,8,["modelValue"])]),_:1}),t(o,{cols:"12",sm:"6"},{default:a(()=>[t(s,{modelValue:e.editedItem.firstname,"onUpdate:modelValue":i[5]||(i[5]=l=>e.editedItem.firstname=l),label:"Nombre"},null,8,["modelValue"])]),_:1}),t(o,{cols:"12",sm:"6"},{default:a(()=>[t(k,{modelValue:e.editedItem.locality_id,"onUpdate:modelValue":i[6]||(i[6]=l=>e.editedItem.locality_id=l),items:e.localities,"item-title":"name","item-value":"id",label:"Localidad",clearable:""},null,8,["modelValue","items"])]),_:1}),t(o,{cols:"12",sm:"6"},{default:a(()=>[t(s,{modelValue:e.editedItem.email,"onUpdate:modelValue":i[7]||(i[7]=l=>e.editedItem.email=l),label:"Email"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(D,null,{default:a(()=>[t(S),t(d,{variant:"outlined",color:"primary",onClick:i[9]||(i[9]=l=>e.dialog=!1)},{default:a(()=>[n("Cancelar")]),_:1}),t(d,{class:"bg-primary",color:"white",onClick:i[10]||(i[10]=l=>e.$save())},{default:a(()=>[n("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),"item.active":a(({item:l})=>[t(C,{color:e.$resolveStatusVariant(l.active).color,density:"comfortable"},{default:a(()=>[n(m(e.$resolveStatusVariant(l.active).text),1)]),_:2},1032,["color"])]),"item.actions":a(({item:l})=>[V("div",j,[t(b,{size:"small",title:"Editar",onClick:r=>{e.vista=!1,e.$editItem(l.id)}},{default:a(()=>[t(v,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),t(R,{modelValue:l.active,"onUpdate:modelValue":r=>l.active=r,"true-value":1,"false-value":0,color:"primary","hide-details":"",title:"Activar o Inactivar",onClick:r=>e.$toggleActive(l)},null,8,["modelValue","onUpdate:modelValue","onClick"]),t(b,{size:"small",title:"Eliminar",onClick:r=>{e.vista=!1,e.$deleteItem(l.id,l.address)}},{default:a(()=>[t(v,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])]),_:1},8,["headers","items","search"]),t(U,{modelValue:e.snackbar,"onUpdate:modelValue":i[13]||(i[13]=l=>e.snackbar=l),bottom:!0,color:e.color,timeout:e.timeout},{action:a(({attrs:l})=>[t(d,I({dark:"",text:""},l,{onClick:i[12]||(i[12]=r=>e.snackbar=!1)}),{default:a(()=>[n(" Cerrar ")]),_:2},1040)]),default:a(()=>[V("div",{innerHTML:e.text},null,8,G)]),_:1},8,["modelValue","color","timeout"])]),_:1})]),_:1},8,["title"])}const ve=w(F,[["render",K]]);export{ve as default};
