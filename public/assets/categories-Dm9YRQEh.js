import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as f,V as p,d as N}from"./VCard-DydCA3ij.js";import{V as P}from"./VDataTable-DdcjOapO.js";import{a as y,V as o}from"./VRow-C4xKDsdp.js";import{V as C}from"./VTextField-BFwWA4c4.js";import{V as b}from"./VAutocomplete-C00TsAO4.js";import{e as k}from"./VChip-Bpi0D_nl.js";import{V as T}from"./VDialog-CElxPYVm.js";import{e as $,w as l,v as B,o as s,b as t,a as c,t as d,l as w,c as V,a3 as n,a0 as I,V as g,H as m}from"./main-CXbVQelV.js";import{a as H,b as U,V as A}from"./VSnackbar-DElA1Bai.js";import{V as z}from"./VForm-qHysTZf4.js";import{V as E}from"./VContainer-cJ1Wwdkk.js";import{V as S}from"./VSpacer-D4ygEDCf.js";import{V as L}from"./VSwitch-CynYSGAY.js";import"./VAvatar-D60b_pC1.js";import"./VImg-CCDcZEHq.js";import"./VSelect-D6y5jHko.js";import"./forwardRefs-C-GTDzx5.js";import"./VOverlay-CKsM211p.js";import"./easing-DY7PVvcf.js";import"./lazy-hhV86JqJ.js";import"./VCheckboxBtn-BfelbD9T.js";import"./VTable-D39T5yJb.js";import"./VDivider-mlwkm9Dh.js";import"./index-DwmO_A2i.js";import"./ssrBoot-CddAT7tB.js";function R(){return"Categorías"}const q={data:e=>({dessertName:"",valid:!0,title:R(),route:"categories",dialog:!1,snackbar:!1,visible:!0,text:"Registro Insertado",color:"success",timeout:4e3,search:"",vista:!1,headers:[{title:"Acciones",key:"actions",value:"actions",sortable:!1,width:"150px"},{title:"Nombre",filterable:!0,key:"name"},{title:"Categoría Padre",filterable:!0,key:"categoriesParents"},{title:"Estado",key:"active",width:"150px"}],desserts:[],categoriesParents:[],editedIndex:-1,editedItem:{id:"",name:"",category_id:null,active:1},defaultItem:{id:"",name:"",category_id:null,active:1},filters:{id:"",name:"",category_id:"",created_at:"",updated_at:""},filterKey:[],selectedHeaders:[]}),computed:{formTitle(){return this.editedIndex===-1?"Registrar "+this.title:"Editar "+this.title},filteredData(){return this.$filteredData().data!==void 0?this.$filteredData().data:this.$filteredData()},showHeaders(){return this.headers.filter(e=>this.selectedHeaders.includes(e))},filteredDesserts(){let e=[];return this.dessertName&&e.push(this.filterDessertName),e.length>0?this.desserts.filter(r=>e.every(v=>v(r))):this.desserts}},watch:{dialog(e){e||this.$close()}},created(){this.$initialize(),this.selectedHeaders=this.headers,this.loadCategoriesParents()},methods:{onDialogToggle(e){e&&this.loadCategoriesParents()},async loadCategoriesParents(){try{const e=await this.$axios.get(this.$routes[this.route]);this.categoriesParents=e.data.data}catch(e){console.error("Error al cargar categorías padre:",e)}},filterDessertName(e){return e.name.toLowerCase().includes(this.dessertName.toLowerCase())},filterByName(e){return this.$filterBy(e,"name")},filterByActive(e){return this.$filterBy(e,"active")}},mounted(){console.log("Componente "+this.title+" creado")}},F={key:1,class:"grey--text caption"},M={key:0},j={key:1,class:"text-disabled"},G={class:"d-flex flex-wrap ga-1 align-center",style:{"min-width":"50px",margin:"0px"}},K=["innerHTML"];function J(e,r,v,O,Q,u){const h=B("IconBtn");return s(),$(f,{title:"Administración de "+e.title},{default:l(()=>[t(p,{class:"d-flex px-2"},{default:l(()=>[t(P,{headers:u.showHeaders,items:u.filteredDesserts,search:e.search,class:"text-no-wrap striped-table"},{top:l(()=>[t(f,{flat:"",color:"white"},{default:l(()=>[t(p,null,{default:l(()=>[t(y,null,{default:l(()=>[t(o,{sm:"4",class:"pl-0 pt-20 py-2"},{default:l(()=>[t(C,{modelValue:e.search,"onUpdate:modelValue":r[0]||(r[0]=a=>e.search=a),"append-icon":"ri-search-line",label:"Busqueda de "+e.title},null,8,["modelValue","label"])]),_:1}),t(o,{sm:"3"}),t(o,{sm:"4",class:"pt-20 py-2"},{default:l(()=>[t(b,{modelValue:e.selectedHeaders,"onUpdate:modelValue":r[1]||(r[1]=a=>e.selectedHeaders=a),items:e.headers,label:"Columnas Visibles",multiple:"","return-object":""},{selection:l(({item:a,index:i})=>[i<2?(s(),$(k,{key:0},{default:l(()=>[c("span",null,d(a.title),1)]),_:2},1024)):w("",!0),i===2?(s(),V("span",F,"(otras "+d(e.selectedHeaders.length-2)+"+)",1)):w("",!0)]),_:1},8,["modelValue","items"])]),_:1}),t(o,{sm:"1",class:"pt-20 py-2"},{default:l(()=>[t(T,{modelValue:e.dialog,"onUpdate:modelValue":[r[8]||(r[8]=a=>e.dialog=a),u.onDialogToggle],"max-width":"400px"},{activator:l(({props:a})=>[t(n,I(a,{color:e.$cv("principal"),size:"x-large",title:"s "+e.title}),{default:l(()=>[t(g,{size:"large",icon:"ri-add-circle-line"})]),_:2},1040,["color","title"])]),default:l(()=>[t(f,null,{default:l(()=>[t(H,{color:e.$cv("principal")},{default:l(()=>[t(n,{icon:"ri-close-line",color:"white",onClick:r[2]||(r[2]=a=>e.dialog=!1)}),t(U,null,{default:l(()=>[m(d(u.formTitle),1)]),_:1})]),_:1},8,["color"]),t(z,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":r[5]||(r[5]=a=>e.valid=a),"lazy-validation":""},{default:l(()=>[t(p,null,{default:l(()=>[t(E,null,{default:l(()=>[t(y,null,{default:l(()=>[t(o,{cols:"12",sm:"12"},{default:l(()=>[t(C,{modelValue:e.editedItem.name,"onUpdate:modelValue":r[3]||(r[3]=a=>e.editedItem.name=a),label:"Nombre",required:""},null,8,["modelValue"])]),_:1}),t(o,{cols:"12",sm:"12"},{default:l(()=>[t(b,{modelValue:e.editedItem.category_id,"onUpdate:modelValue":r[4]||(r[4]=a=>e.editedItem.category_id=a),items:e.categoriesParents,"item-title":"name","item-value":"id",label:"Categoría Padre",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(N,null,{default:l(()=>[t(S),t(n,{variant:"outlined",color:"primary",onClick:r[6]||(r[6]=a=>e.dialog=!1)},{default:l(()=>[m("Cancelar")]),_:1}),t(n,{class:"bg-primary",color:"white",onClick:r[7]||(r[7]=a=>e.$save())},{default:l(()=>[m("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),"item.active":l(({item:a})=>[t(k,{color:e.$resolveStatusVariant(a.active).color,density:"comfortable"},{default:l(()=>[m(d(e.$resolveStatusVariant(a.active).text),1)]),_:2},1032,["color"])]),"item.categoriesParents":l(({item:a})=>[a.categoriesParents?(s(),V("span",M,d(a.categoriesParents.name),1)):(s(),V("span",j,"Ninguna"))]),"item.actions":l(({item:a})=>[c("div",G,[t(h,{size:"small",title:"Editar",onClick:i=>{e.vista=!1,e.$editItem(a.id)}},{default:l(()=>[t(g,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),t(L,{modelValue:a.active,"onUpdate:modelValue":i=>a.active=i,"true-value":1,"false-value":0,color:"primary","hide-details":"",title:"Activar o Inactivar",onClick:i=>e.$toggleActive(a)},null,8,["modelValue","onUpdate:modelValue","onClick"]),t(h,{size:"small",title:"Eliminar",onClick:i=>{e.vista=!1,e.$deleteItem(a.id,a.name)}},{default:l(()=>[t(g,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])]),_:1},8,["headers","items","search"]),t(A,{modelValue:e.snackbar,"onUpdate:modelValue":r[10]||(r[10]=a=>e.snackbar=a),bottom:!0,color:e.color,timeout:e.timeout},{action:l(({attrs:a})=>[t(n,I({dark:"",text:""},a,{onClick:r[9]||(r[9]=i=>e.snackbar=!1)}),{default:l(()=>[m(" Cerrar ")]),_:2},1040)]),default:l(()=>[c("div",{innerHTML:e.text},null,8,K)]),_:1},8,["modelValue","color","timeout"])]),_:1})]),_:1},8,["title"])}const Ce=D(q,[["render",J]]);export{Ce as default};
