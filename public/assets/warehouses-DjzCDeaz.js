import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as f,V,d as U}from"./VCard-CvwSaK75.js";import{V as H}from"./VDataTable-DgjMfVXC.js";import{a as h,V as i}from"./VRow-D7MB0WoS.js";import{V as n}from"./VTextField-CCmGdN42.js";import{V as B}from"./VAutocomplete-BQ3VbufJ.js";import{e as g}from"./VChip-BIoq_vVA.js";import{V as D}from"./VDialog-BluRQryC.js";import{e as w,w as l,v as N,o as v,b as t,a as b,t as m,l as y,c as S,a3 as r,a0 as $,V as k,H as d}from"./main-e7Lz9kP6.js";import{a as z,b as A,V as E}from"./VSnackbar-Clit-F-N.js";import{V as I}from"./VSpacer-co_eAEec.js";import{V as L}from"./VForm-6dgauVcZ.js";import{V as R}from"./VContainer-BmXX-p3Q.js";import{V as q}from"./VSwitch-DqfvjE3v.js";import"./VAvatar-yC7Xe1i1.js";import"./VImg-6ddI0whj.js";import"./VSelect-BA6M5Uoi.js";import"./forwardRefs-C-GTDzx5.js";import"./VOverlay-IsiX7pzg.js";import"./easing-DY7PVvcf.js";import"./lazy-ABlIQMX4.js";import"./VCheckboxBtn-Clou7mza.js";import"./VTable-q6t5mD86.js";import"./VDivider--54rnCak.js";import"./index-DBVIn0aF.js";import"./ssrBoot-YHk3i5gA.js";const F={data:()=>({title:"Depositos",route:"warehouses",dialog:!1,snackbar:!1,text:"Registro Insertado",color:"success",timeout:4e3,search:"",valid:!0,headers:[{title:"Acciones",key:"actions",value:"actions",sortable:!1,width:"150px"},{title:"Código",key:"code",width:"100px"},{title:"Nombre",filterable:!0,key:"name"},{title:"Ubicación",key:"location"},{title:"Estado",key:"active",width:"150px"}],desserts:[],editedIndex:-1,editedItem:{id:"",name:"",code:"",location:"",active:1},defaultItem:{id:"",name:"",code:"",location:"",active:1},selectedHeaders:[]}),computed:{formTitle(){return this.editedIndex===-1?"Registrar Deposito":"Editar Deposito"},showHeaders(){return this.headers.filter(e=>this.selectedHeaders.includes(e))},filteredDesserts(){if(!this.search)return this.desserts;const e=this.search.toLowerCase();return this.desserts.filter(o=>{var u,p;return o.name.toLowerCase().includes(e)||((u=o.code)==null?void 0:u.toLowerCase().includes(e))||((p=o.location)==null?void 0:p.toLowerCase().includes(e))})}},created(){this.initialize(),this.selectedHeaders=this.headers},methods:{async initialize(){try{const e=await this.$axios.get(this.$routes[this.route]);this.desserts=e.data.data}catch(e){console.error("Error cargando depositos:",e)}},showSnackbar(e,o){this.text=e,this.color=o,this.snackbar=!0}},watch:{dialog(e){e||this.$close()}}},M={key:1,class:"grey--text caption"},j={class:"d-flex flex-wrap gap-1 align-center",style:{"min-width":"120px"}},G=["innerHTML"];function P(e,o,u,p,J,c){const C=N("IconBtn");return v(),w(f,{title:"Administración de "+e.title},{default:l(()=>[t(V,{class:"d-flex px-2"},{default:l(()=>[t(H,{headers:c.showHeaders,items:c.filteredDesserts,search:e.search,class:"text-no-wrap striped-table"},{top:l(()=>[t(f,{flat:"",color:"white"},{default:l(()=>[t(V,null,{default:l(()=>[t(h,null,{default:l(()=>[t(i,{sm:"4",class:"pl-0 pt-20 py-2"},{default:l(()=>[t(n,{modelValue:e.search,"onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),"append-icon":"ri-search-line",label:"Busqueda de "+e.title},null,8,["modelValue","label"])]),_:1}),t(i,{sm:"4",class:"pt-20 py-2"},{default:l(()=>[t(B,{modelValue:e.selectedHeaders,"onUpdate:modelValue":o[1]||(o[1]=a=>e.selectedHeaders=a),items:e.headers,label:"Columnas Visibles",multiple:"","return-object":""},{selection:l(({item:a,index:s})=>[s<2?(v(),w(g,{key:0},{default:l(()=>[b("span",null,m(a.title),1)]),_:2},1024)):y("",!0),s===2?(v(),S("span",M," (otras "+m(e.selectedHeaders.length-2)+"+) ",1)):y("",!0)]),_:1},8,["modelValue","items"])]),_:1}),t(i,{sm:"1",class:"pt-20 py-2"},{default:l(()=>[t(D,{modelValue:e.dialog,"onUpdate:modelValue":o[9]||(o[9]=a=>e.dialog=a),"max-width":"500px"},{activator:l(({props:a})=>[t(r,$(a,{color:e.$cv("principal"),size:"x-large",title:"Registrar "+e.title}),{default:l(()=>[t(k,{size:"large",icon:"ri-add-circle-line"})]),_:2},1040,["color","title"])]),default:l(()=>[t(f,null,{default:l(()=>[t(z,{color:e.$cv("principal")},{default:l(()=>[t(r,{icon:"ri-close-line",color:"white",onClick:o[2]||(o[2]=a=>e.dialog=!1)}),t(A,null,{default:l(()=>[d(m(c.formTitle),1)]),_:1}),t(I)]),_:1},8,["color"]),t(L,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":o[8]||(o[8]=a=>e.valid=a)},{default:l(()=>[t(V,null,{default:l(()=>[t(R,{class:"py-0"},{default:l(()=>[t(h,{class:"py-0"},{default:l(()=>[t(i,{cols:"12",sm:"12"},{default:l(()=>[t(h,{class:"py-0"},{default:l(()=>[t(i,{cols:"12",sm:"12"},{default:l(()=>[t(n,{modelValue:e.editedItem.name,"onUpdate:modelValue":o[3]||(o[3]=a=>e.editedItem.name=a),label:"Nombre",required:"",rules:[a=>!!a||"Nombre es requerido"]},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",sm:"12"},{default:l(()=>[t(n,{modelValue:e.editedItem.code,"onUpdate:modelValue":o[4]||(o[4]=a=>e.editedItem.code=a),label:"Código"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",sm:"12"},{default:l(()=>[t(n,{modelValue:e.editedItem.location,"onUpdate:modelValue":o[5]||(o[5]=a=>e.editedItem.location=a),label:"Ubicación"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(U,null,{default:l(()=>[t(I),t(r,{variant:"outlined",color:"primary",onClick:o[6]||(o[6]=a=>e.dialog=!1)},{default:l(()=>[d("Cancelar")]),_:1}),t(r,{class:"bg-primary",color:"white",onClick:o[7]||(o[7]=a=>e.$save())},{default:l(()=>[d("Guardar")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),"item.active":l(({item:a})=>[t(g,{color:e.$resolveStatusVariant(a.active).color,density:"comfortable"},{default:l(()=>[d(m(e.$resolveStatusVariant(a.active).text),1)]),_:2},1032,["color"])]),"item.actions":l(({item:a})=>[b("div",j,[t(C,{size:"small",class:"my-1",title:"Editar",onClick:s=>e.$editItem(a.id)},{default:l(()=>[t(k,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),t(q,{modelValue:a.active,"onUpdate:modelValue":s=>a.active=s,"true-value":1,"false-value":0,color:"primary","hide-details":"",title:"Activar o Inactivar",onClick:s=>e.$toggleActive(a)},null,8,["modelValue","onUpdate:modelValue","onClick"]),t(C,{size:"small",title:"Eliminar",class:"my-1",onClick:s=>e.$deleteItem(a.id,a.name)},{default:l(()=>[t(k,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])]),_:1},8,["headers","items","search"]),t(E,{modelValue:e.snackbar,"onUpdate:modelValue":o[11]||(o[11]=a=>e.snackbar=a),bottom:!0,color:e.color,timeout:e.timeout},{action:l(({attrs:a})=>[t(r,$({dark:"",text:""},a,{onClick:o[10]||(o[10]=s=>e.snackbar=!1)}),{default:l(()=>[d("Cerrar")]),_:2},1040)]),default:l(()=>[b("div",{innerHTML:e.text},null,8,G)]),_:1},8,["modelValue","color","timeout"])]),_:1})]),_:1},8,["title"])}const ve=T(F,[["render",P]]);export{ve as default};
