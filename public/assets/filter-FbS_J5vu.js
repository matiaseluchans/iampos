import{g as we,h as Se,V as ie}from"./VTextField-2ruvtwyY.js";import{J as j,L as he,Q as ue,b6 as ge,s as z,X as re,b as g,F as Q,$ as N,p as ke,D as A,av as ae,r as B,j as R,aY as ye,aQ as le,bm as Pe,a7 as Fe,aR as Ve,az as Ie,bl as Te,aE as xe,B as Ce,bn as Me,aw as J,G as Re,K as De,ak as Le,T as Ae,ag as fe,V as de,aS as Be,aq as Oe,H as _e,af as oe,aU as ve,u as q,bk as Ke}from"./main-DOucTeTc.js";import{f as Ee}from"./forwardRefs-C-GTDzx5.js";import{m as He,f as Ue,u as Ne,V as ze,a as je,b as me,e as $e}from"./VChip-Dd9kPkn6.js";import{m as qe}from"./VImg-CfnnTD9W.js";import{g as Qe}from"./VOverlay-Ejijsbhx.js";import{c as We}from"./VCheckboxBtn-BC80PW81.js";const Xe=j({renderless:Boolean,...he()},"VVirtualScrollItem"),Ye=ue()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Xe(),emits:{"update:height":e=>!0},setup(e,r){let{attrs:t,emit:s,slots:u}=r;const{resizeRef:f,contentRect:y}=ge(void 0,"border");z(()=>{var o;return(o=y.value)==null?void 0:o.height},o=>{o!=null&&s("update:height",o)}),re(()=>{var o,n;return e.renderless?g(Q,null,[(o=u.default)==null?void 0:o.call(u,{itemRef:f})]):g("div",N({ref:f,class:["v-virtual-scroll__item",e.class],style:e.style},t),[(n=u.default)==null?void 0:n.call(u)])})}}),Ge=-1,Je=1,ne=100,Ze=j({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function et(e,r){const t=ke(),s=A(0);ae(()=>{s.value=parseFloat(e.itemHeight||0)});const u=A(0),f=A(Math.ceil((parseInt(e.height)||t.height.value)/(s.value||16))||1),y=A(0),o=A(0),n=B(),m=B();let k=0;const{resizeRef:P,contentRect:c}=ge();ae(()=>{P.value=n.value});const d=R(()=>{var l;return n.value===document.documentElement?t.height.value:((l=c.value)==null?void 0:l.height)||parseInt(e.height)||0}),V=R(()=>!!(n.value&&m.value&&d.value&&s.value));let b=Array.from({length:r.value.length}),h=Array.from({length:r.value.length});const p=A(0);let I=-1;function L(l){return b[l]||s.value}const D=Pe(()=>{const l=performance.now();h[0]=0;const i=r.value.length;for(let F=1;F<=i-1;F++)h[F]=(h[F-1]||0)+L(F-1);p.value=Math.max(p.value,performance.now()-l)},p),W=z(V,l=>{l&&(W(),k=m.value.offsetTop,D.immediate(),O(),~I&&Fe(()=>{Ve&&window.requestAnimationFrame(()=>{G(I),I=-1})}))});z(d,(l,i)=>{i&&O()}),ye(()=>{D.clear()});function Z(l,i){const F=b[l],x=s.value;s.value=x?Math.min(s.value,i):i,(F!==i||x!==s.value)&&(b[l]=i,D())}function T(l){return l=le(l,0,r.value.length-1),h[l]||0}function X(l){return tt(h,l)}let K=0,E=0,$=0;function ee(){if(!n.value||!m.value)return;const l=n.value.scrollTop,i=performance.now();i-$>500?(E=Math.sign(l-K),k=m.value.offsetTop):E=l-K,K=l,$=i,O()}function H(){!n.value||!m.value||(E=0,$=0,O())}let Y=-1;function O(){cancelAnimationFrame(Y),Y=requestAnimationFrame(te)}function te(){if(!n.value||!d.value)return;const l=K-k,i=Math.sign(E),F=Math.max(0,l-ne),x=le(X(F),0,r.value.length),v=l+d.value+ne,w=le(X(v)+1,x+1,r.value.length);if((i!==Ge||x<u.value)&&(i!==Je||w>f.value)){const S=T(u.value)-T(x),M=T(w)-T(f.value);Math.max(S,M)>ne?(u.value=x,f.value=w):(x<=0&&(u.value=x),w>=r.value.length&&(f.value=w))}y.value=T(u.value),o.value=T(r.value.length)-T(f.value)}function G(l){const i=T(l);!n.value||l&&!i?I=l:n.value.scrollTop=i}const a=R(()=>r.value.slice(u.value,f.value).map((l,i)=>({raw:l,index:i+u.value})));return z(r,()=>{b=Array.from({length:r.value.length}),h=Array.from({length:r.value.length}),D.immediate(),O()},{deep:!0}),{containerRef:n,markerRef:m,computedItems:a,paddingTop:y,paddingBottom:o,scrollToIndex:G,handleScroll:ee,handleScrollend:H,handleItemResize:Z}}function tt(e,r){let t=e.length-1,s=0,u=0,f=null,y=-1;if(e[t]<r)return t;for(;s<=t;)if(u=s+t>>1,f=e[u],f>r)t=u-1;else if(f<r)y=u,s=u+1;else return f===r?u:s;return y}const lt=j({items:{type:Array,default:()=>[]},renderless:Boolean,...Ze(),...he(),...Ie()},"VVirtualScroll"),nt=ue()({name:"VVirtualScroll",props:lt(),setup(e,r){let{slots:t}=r;const s=Te("VVirtualScroll"),{dimensionStyles:u}=xe(e),{containerRef:f,markerRef:y,handleScroll:o,handleScrollend:n,handleItemResize:m,scrollToIndex:k,paddingTop:P,paddingBottom:c,computedItems:d}=et(e,Ce(e,"items"));return Me(()=>e.renderless,()=>{function V(){var p,I;const h=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";f.value===document.documentElement?(document[h]("scroll",o,{passive:!0}),document[h]("scrollend",n)):((p=f.value)==null||p[h]("scroll",o,{passive:!0}),(I=f.value)==null||I[h]("scrollend",n))}Re(()=>{f.value=Qe(s.vnode.el,!0),V(!0)}),ye(V)}),re(()=>{const V=d.value.map(b=>g(Ye,{key:b.index,renderless:e.renderless,"onUpdate:height":h=>m(b.index,h)},{default:h=>{var p;return(p=t.default)==null?void 0:p.call(t,{item:b.raw,index:b.index,...h})}}));return e.renderless?g(Q,null,[g("div",{ref:y,class:"v-virtual-scroll__spacer",style:{paddingTop:J(P.value)}},null),V,g("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:J(c.value)}},null)]):g("div",{ref:f,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:n,style:[u.value,e.style]},[g("div",{ref:y,class:"v-virtual-scroll__container",style:{paddingTop:J(P.value),paddingBottom:J(c.value)}},[V])])}),{scrollToIndex:k}}});function at(e,r){const t=A(!1);let s;function u(o){cancelAnimationFrame(s),t.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{t.value=!1})})}async function f(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(t.value){const n=z(t,()=>{n(),o()})}else o()})}async function y(o){var k,P;if(o.key==="Tab"&&((k=r.value)==null||k.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const n=(P=e.value)==null?void 0:P.$el;if(!n)return;(o.key==="Home"||o.key==="End")&&n.scrollTo({top:o.key==="Home"?0:n.scrollHeight,behavior:"smooth"}),await f();const m=n.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const c=n.getBoundingClientRect().top;for(const d of m)if(d.getBoundingClientRect().top>=c){d.focus();break}}else{const c=n.getBoundingClientRect().bottom;for(const d of[...m].reverse())if(d.getBoundingClientRect().bottom<=c){d.focus();break}}}return{onListScroll:u,onListKeydown:y}}const ot=j({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:De,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...He({itemChildren:!1})},"Select"),ut=j({...ot(),...Le(we({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...qe({transition:{component:Ue}})},"VSelect"),gt=ue()({name:"VSelect",props:ut(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,r){let{slots:t}=r;const{t:s}=Ae(),u=B(),f=B(),y=B(),o=fe(e,"menu"),n=R({get:()=>o.value,set:a=>{var l;o.value&&!a&&((l=f.value)!=null&&l.Î¨openChildren)||(o.value=a)}}),{items:m,transformIn:k,transformOut:P}=Ne(e),c=fe(e,"modelValue",[],a=>k(a===null?[null]:oe(a)),a=>{const l=P(a);return e.multiple?l:l[0]??null}),d=R(()=>typeof e.counterValue=="function"?e.counterValue(c.value):typeof e.counterValue=="number"?e.counterValue:c.value.length),V=Se(),b=R(()=>c.value.map(a=>a.value)),h=A(!1),p=R(()=>n.value?e.closeText:e.openText);let I="",L;const D=R(()=>e.hideSelected?m.value.filter(a=>!c.value.some(l=>l===a)):m.value),W=R(()=>e.hideNoData&&!m.value.length||e.readonly||(V==null?void 0:V.isReadonly.value)),Z=R(()=>{var a;return{...e.menuProps,activatorProps:{...((a=e.menuProps)==null?void 0:a.activatorProps)||{},"aria-haspopup":"listbox"}}}),T=B(),{onListScroll:X,onListKeydown:K}=at(T,u);function E(a){e.openOnClear&&(n.value=!0)}function $(){W.value||(n.value=!n.value)}function ee(a){var v,w;if(!a.key||e.readonly||V!=null&&V.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(n.value=!0),["Escape","Tab"].includes(a.key)&&(n.value=!1),a.key==="Home"?(v=T.value)==null||v.focus("first"):a.key==="End"&&((w=T.value)==null||w.focus("last"));const l=1e3;function i(S){const M=S.key.length===1,C=!S.ctrlKey&&!S.metaKey&&!S.altKey;return M&&C}if(e.multiple||!i(a))return;const F=performance.now();F-L>l&&(I=""),I+=a.key.toLowerCase(),L=F;const x=m.value.find(S=>S.title.toLowerCase().startsWith(I));x!==void 0&&(c.value=[x])}function H(a){if(e.multiple){const l=c.value.findIndex(i=>e.valueComparator(i.value,a.value));if(l===-1)c.value=[...c.value,a];else{const i=[...c.value];i.splice(l,1),c.value=i}}else c.value=[a],n.value=!1}function Y(a){var l;(l=T.value)!=null&&l.$el.contains(a.relatedTarget)||(n.value=!1)}function O(){var a;h.value&&((a=u.value)==null||a.focus())}function te(a){h.value=!0}function G(a){if(a==null)c.value=[];else if(ve(u.value,":autofill")||ve(u.value,":-webkit-autofill")){const l=m.value.find(i=>i.title===a);l&&H(l)}else u.value&&(u.value.value="")}return z(n,()=>{if(!e.hideSelected&&n.value&&c.value.length){const a=D.value.findIndex(l=>c.value.some(i=>e.valueComparator(i.value,l.value)));Ve&&window.requestAnimationFrame(()=>{var l;a>=0&&((l=y.value)==null||l.scrollToIndex(a))})}}),re(()=>{const a=!!(e.chips||t.chip),l=!!(!e.hideNoData||D.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),i=c.value.length>0,F=ie.filterProps(e),x=i||!h.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return g(ie,N({ref:u},F,{modelValue:c.value.map(v=>v.props.value).join(", "),"onUpdate:modelValue":G,focused:h.value,"onUpdate:focused":v=>h.value=v,validationValue:c.externalValue,counterValue:d.value,dirty:i,class:["v-select",{"v-select--active-menu":n.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":c.value.length,"v-select--selection-slot":!!t.selection},e.class],style:e.style,inputmode:"none",placeholder:x,"onClick:clear":E,"onMousedown:control":$,onBlur:Y,onKeydown:ee,"aria-label":s(p.value),title:s(p.value)}),{...t,default:()=>g(Q,null,[g(ze,N({ref:f,modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,activator:"parent",contentClass:"v-select__content",disabled:W.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:O},Z.value),{default:()=>[l&&g(je,{ref:T,selected:b.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:v=>v.preventDefault(),onKeydown:K,onFocusin:te,onScrollPassive:X,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var v,w,S;return[(v=t["prepend-item"])==null?void 0:v.call(t),!D.value.length&&!e.hideNoData&&(((w=t["no-data"])==null?void 0:w.call(t))??g(me,{title:s(e.noDataText)},null)),g(nt,{ref:y,renderless:!0,items:D.value},{default:M=>{var ce;let{item:C,index:U,itemRef:_}=M;const se=N(C.props,{ref:_,key:U,onClick:()=>H(C)});return((ce=t.item)==null?void 0:ce.call(t,{item:C,index:U,props:se}))??g(me,N(se,{role:"option"}),{prepend:pe=>{let{isSelected:be}=pe;return g(Q,null,[e.multiple&&!e.hideSelected?g(We,{key:C.value,modelValue:be,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependIcon&&g(de,{icon:C.props.prependIcon},null)])}})}}),(S=t["append-item"])==null?void 0:S.call(t)]}})]}),c.value.map((v,w)=>{function S(_){_.stopPropagation(),_.preventDefault(),H(v)}const M={"onClick:close":S,onMousedown(_){_.preventDefault(),_.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},C=a?!!t.chip:!!t.selection,U=C?Be(a?t.chip({item:v,index:w,props:M}):t.selection({item:v,index:w})):void 0;if(!(C&&!U))return g("div",{key:v.value,class:"v-select__selection"},[a?t.chip?g(Oe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:v.title}}},{default:()=>[U]}):g($e,N({key:"chip",closable:e.closableChips,size:"small",text:v.title,disabled:v.props.disabled},M),null):U??g("span",{class:"v-select__selection-text"},[v.title,e.multiple&&w<c.value.length-1&&g("span",{class:"v-select__selection-comma"},[_e(",")])])])})]),"append-inner":function(){var M;for(var v=arguments.length,w=new Array(v),S=0;S<v;S++)w[S]=arguments[S];return g(Q,null,[(M=t["append-inner"])==null?void 0:M.call(t,...w),e.menuIcon?g(de,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Ee({isFocused:h,menu:n,select:H},u)}}),rt=(e,r,t)=>e==null||r==null?-1:e.toString().toLocaleLowerCase().indexOf(r.toString().toLocaleLowerCase()),yt=j({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function st(e,r,t){var o;const s=[],u=(t==null?void 0:t.default)??rt,f=t!=null&&t.filterKeys?oe(t.filterKeys):!1,y=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return s;e:for(let n=0;n<e.length;n++){const[m,k=m]=oe(e[n]),P={},c={};let d=-1;if(r&&!(t!=null&&t.noFilter)){if(typeof m=="object"){const h=f||Object.keys(k);for(const p of h){const I=Ke(k,p,k),L=(o=t==null?void 0:t.customKeyFilter)==null?void 0:o[p];if(d=L?L(I,r,m):u(I,r,m),d!==-1&&d!==!1)L?P[p]=d:c[p]=d;else if((t==null?void 0:t.filterMode)==="every")continue e}}else d=u(m,r,m),d!==-1&&d!==!1&&(c.title=d);const V=Object.keys(c).length,b=Object.keys(P).length;if(!V&&!b||(t==null?void 0:t.filterMode)==="union"&&b!==y&&!V||(t==null?void 0:t.filterMode)==="intersection"&&(b!==y||!V))continue}s.push({index:n,matches:{...c,...P}})}return s}function Vt(e,r,t,s){const u=B([]),f=B(new Map),y=R(()=>s!=null&&s.transform?q(r).map(n=>[n,s.transform(n)]):q(r));ae(()=>{const n=typeof t=="function"?t():q(t),m=typeof n!="string"&&typeof n!="number"?"":String(n),k=st(y.value,m,{customKeyFilter:{...e.customKeyFilter,...q(s==null?void 0:s.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),P=q(r),c=[],d=new Map;k.forEach(V=>{let{index:b,matches:h}=V;const p=P[b];c.push(p),d.set(p.value,h)}),u.value=c,f.value=d});function o(n){return f.value.get(n.value)}return{filteredItems:u,filteredMatches:f,getMatches:o}}export{gt as V,ot as a,at as b,nt as c,yt as m,Vt as u};
