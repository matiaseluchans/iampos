import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as f,V as c,d as D}from"./VCard-B9H2nVrW.js";import{V as g}from"./VDataTable-Dm3sGLe9.js";import{a as V,V as r}from"./VRow-Ccs27aI9.js";import{V as v}from"./VTextField-Cxefcz0w.js";import{V as H}from"./VAutocomplete-DztI00yR.js";import{e as $}from"./VChip-BHUHjEql.js";import{V as N}from"./VDialog-B_5yp4IB.js";import{e as h,w as a,v as T,o as m,b as t,a as b,t as n,l as k,c as U,a3 as u,a0 as w,V as p,H as s}from"./main-D-FNcJ5Q.js";import{a as B,b as L,V as A}from"./VSnackbar-VJSLefhp.js";import{V as z}from"./VForm-BQmVpmiY.js";import{V as S}from"./VContainer-BfeUkzr9.js";import{V as E}from"./VCheckbox-YJq9oHo2.js";import{V as P}from"./VSpacer-DOVH59ZK.js";import{V as R}from"./VSwitch-DxQkNNKh.js";import"./VAvatar-yRb2AyES.js";import"./VImg-LIdzWOkd.js";import"./VSelect-iYd76WP_.js";import"./forwardRefs-C-GTDzx5.js";import"./VOverlay-Du9Mdrcw.js";import"./easing-DY7PVvcf.js";import"./lazy-beIlw_aA.js";import"./VCheckboxBtn-BGEB4GOz.js";import"./VTable-D0vxZhBM.js";import"./VDivider-D4qvZZu2.js";import"./index-BnInBex3.js";import"./ssrBoot-BsWm5Mof.js";function q(){return"Listas de Precios"}const F={data:e=>({dessertName:"",valid:!0,title:q(),route:"priceLists",dialog:!1,snackbar:!1,visible:!0,text:"Registro Insertado",color:"success",timeout:4e3,search:"",vista:!1,headers:[{title:"Acciones",key:"actions",value:"actions",sortable:!1,width:"150px"},{title:"Nombre",filterable:!0,key:"name"},{title:"Defecto",key:"is_default",width:"100px"},{title:"Estado",key:"active",width:"150px"}],desserts:[],editedIndex:-1,editedItem:{id:"",name:"",description:"",is_default:!1,active:1},defaultItem:{id:"",name:"",description:"",is_default:!1,active:1},filters:{id:"",name:"",created_at:"",updated_at:""},filterKey:[],selectedHeaders:[],productsHeaders:[{title:"Producto",key:"name",sortable:!1},{title:"Precio de Venta",key:"sale_price",sortable:!1,width:"200px"}],productsWithprice:[]}),computed:{formTitle(){return this.editedIndex===-1?"Registrar "+this.title:"Editar "+this.title},filteredData(){return this.$filteredData().data!==void 0?this.$filteredData().data:this.$filteredData()},showHeaders(){return this.headers.filter(e=>this.selectedHeaders.includes(e))},filteredDesserts(){let e=[];return this.dessertName&&e.push(this.filterDessertName),e.length>0?this.desserts.filter(i=>e.every(y=>y(i))):this.desserts}},watch:{dialog(e){e||this.$close(),e&&this.editedItem.id}},created(){this.$initialize(),this.selectedHeaders=this.headers},mounted(){console.log("Componente "+this.title+" creado")},methods:{filterDessertName(e){return e.name.toLowerCase().includes(this.dessertName.toLowerCase())},filterByActive(e){return this.$filterBy(e,"active")},resolveDefaultColor(e){return e.is_default===1?{color:"success",icon:"ri-checkbox-circle-line"}:{color:"gray",icon:"ri-close-circle-line"}}}},M={key:1,class:"grey--text caption"},_={class:"d-flex flex-wrap gap-1 align-center",style:{"min-width":"120px"}},j=["innerHTML"];function G(e,i,y,K,W,d){const C=T("IconBtn");return m(),h(f,{title:"AdministraciÃ³n de "+e.title},{default:a(()=>[t(c,{class:"d-flex px-2"},{default:a(()=>[t(g,{headers:d.showHeaders,items:d.filteredDesserts,search:e.search,class:"text-no-wrap striped-table"},{top:a(()=>[t(f,{flat:"",color:"white"},{default:a(()=>[t(c,null,{default:a(()=>[t(V,null,{default:a(()=>[t(r,{sm:"4",class:"pl-0 pt-20 py-2"},{default:a(()=>[t(v,{modelValue:e.search,"onUpdate:modelValue":i[0]||(i[0]=l=>e.search=l),"append-icon":"ri-search-line",label:"Busqueda de "+e.title},null,8,["modelValue","label"])]),_:1}),t(r,{sm:"3"}),t(r,{sm:"4",class:"pt-20 py-2"},{default:a(()=>[t(H,{modelValue:e.selectedHeaders,"onUpdate:modelValue":i[1]||(i[1]=l=>e.selectedHeaders=l),items:e.headers,label:"Columnas Visibles",multiple:"","return-object":""},{selection:a(({item:l,index:o})=>[o<2?(m(),h($,{key:0},{default:a(()=>[b("span",null,n(l.title),1)]),_:2},1024)):k("",!0),o===2?(m(),U("span",M,"(otras "+n(e.selectedHeaders.length-2)+"+)",1)):k("",!0)]),_:1},8,["modelValue","items"])]),_:1}),t(r,{sm:"1",class:"pt-20 py-2"},{default:a(()=>[t(N,{modelValue:e.dialog,"onUpdate:modelValue":i[8]||(i[8]=l=>e.dialog=l),"max-width":"1000px",persistent:"true"},{activator:a(({props:l})=>[t(u,w(l,{color:e.$cv("principal"),size:"x-large",title:"Registrar "+e.title}),{default:a(()=>[t(p,{size:"large",icon:"ri-add-circle-line"})]),_:2},1040,["color","title"])]),default:a(()=>[t(f,null,{default:a(()=>[t(B,{color:e.$cv("principal")},{default:a(()=>[t(u,{icon:"ri-close-line",color:"white",onClick:i[2]||(i[2]=l=>e.dialog=!1)}),t(L,null,{default:a(()=>[s(n(d.formTitle),1)]),_:1})]),_:1},8,["color"]),t(z,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":i[5]||(i[5]=l=>e.valid=l),"lazy-validation":""},{default:a(()=>[t(c,null,{default:a(()=>[t(S,null,{default:a(()=>[t(V,null,{default:a(()=>[t(r,{cols:"12",sm:"6"},{default:a(()=>[t(v,{modelValue:e.editedItem.name,"onUpdate:modelValue":i[3]||(i[3]=l=>e.editedItem.name=l),label:"Nombre de la Lista",required:""},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",sm:"6"},{default:a(()=>[t(E,{modelValue:e.editedItem.is_default,"onUpdate:modelValue":i[4]||(i[4]=l=>e.editedItem.is_default=l),label:"Lista por defecto"},null,8,["modelValue"])]),_:1})]),_:1}),e.editedItem.products?(m(),h(V,{key:0,class:"py-0 my-0"},{default:a(()=>[t(r,{cols:"12"},{default:a(()=>[t(g,{style:{height:"300px"},headers:e.productsHeaders,items:e.editedItem.products,"hide-default-footer":!0,"items-per-page":1e4,class:"elevation-1"},{"item.name":a(({item:l})=>[s(n(l.name),1)]),"item.sale_price":a(({item:l})=>[t(v,{modelValue:l.pivot.sale_price,"onUpdate:modelValue":o=>l.pivot.sale_price=o,label:"Precio",type:"number",density:"compact",prefix:"$","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),bottom:a(()=>[]),_:1},8,["headers","items"])]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(D,null,{default:a(()=>[t(P),t(u,{variant:"outlined",color:"primary",onClick:i[6]||(i[6]=l=>e.dialog=!1)},{default:a(()=>[s("Cancelar")]),_:1}),t(u,{class:"bg-primary",color:"white",onClick:i[7]||(i[7]=l=>e.$save())},{default:a(()=>[s("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),"item.active":a(({item:l})=>[t($,{color:e.$resolveStatusVariant(l.active).color,density:"comfortable"},{default:a(()=>[s(n(e.$resolveStatusVariant(l.active).text),1)]),_:2},1032,["color"])]),"item.is_default":a(({item:l})=>[t(p,{color:d.resolveDefaultColor(l).color,icon:d.resolveDefaultColor(l).icon},null,8,["color","icon"])]),"item.actions":a(({item:l})=>[b("div",_,[t(C,{size:"small",title:"Editar",onClick:o=>{e.vista=!1,e.$editItem(l.id)}},{default:a(()=>[t(p,{icon:"ri-pencil-line"})]),_:2},1032,["onClick"]),t(R,{modelValue:l.active,"onUpdate:modelValue":o=>l.active=o,"true-value":1,"false-value":0,color:"primary","hide-details":"",title:"Activar o Inactivar",onClick:o=>e.$toggleActive(l)},null,8,["modelValue","onUpdate:modelValue","onClick"]),t(C,{size:"small",title:"Eliminar",onClick:o=>{e.vista=!1,e.$deleteItem(l.id,l.name)}},{default:a(()=>[t(p,{icon:"ri-delete-bin-line"})]),_:2},1032,["onClick"])])]),_:1},8,["headers","items","search"]),t(A,{modelValue:e.snackbar,"onUpdate:modelValue":i[10]||(i[10]=l=>e.snackbar=l),bottom:!0,color:e.color,timeout:e.timeout},{action:a(({attrs:l})=>[t(u,w({dark:"",text:""},l,{onClick:i[9]||(i[9]=o=>e.snackbar=!1)}),{default:a(()=>[s(" Cerrar ")]),_:2},1040)]),default:a(()=>[b("div",{innerHTML:e.text},null,8,j)]),_:1},8,["modelValue","color","timeout"])]),_:1})]),_:1},8,["title"])}const ye=I(F,[["render",G]]);export{ye as default};
